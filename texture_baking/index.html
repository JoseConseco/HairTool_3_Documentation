<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Baking Textures - Hair Tool 4</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../extra.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Baking Textures";
        var mkdocs_page_input_path = "texture_baking.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Hair Tool 4
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../overview/">Overview</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Main Concepts</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../main_workflows/hair_system/">Hair System</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../main_workflows/hair_deformers/">Hair Deformers</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../main_workflows/input_masks/">Input Masks</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../hair_profiles/">Hair Profiles</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../uv_material/">Material and UV</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../presets/">Presets</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Modeling Methods</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../main_workflows/basic_examples/">Basic Examples</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../main_workflows/hair_from_surface/">Strands from Grid Surface</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../main_workflows/strands_from_profile/">Strands From Profile</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../main_workflows/hair_with_track_mesh/">Hair with Track Mesh</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../main_workflows/hair_drawing/">Drawing hair</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../main_workflows/short_hair/">Short Hair</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../main_workflows/shell_hair/">Shell Hair</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Tools</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../convert_hair/">Convert Hair</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../hair_modeling/">Hair Modeling</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../hair_sculpting/">Hair Sculpting</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../curve_tool/">Curve tools</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../mesh_ribbons_ops/">Mesh tools</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Baking Textures</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Baking Textures</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#loading-baking-template">Loading Baking Template</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#available-passes">Available Passes</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#tweaking-hair">Tweaking Hair</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#previewing-bake-result">Previewing Bake Result</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#video-tutorial">Video Tutorial</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#baking-textures">Baking Textures</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#texture-channel-mixing">Texture channel mixing</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#flatten-to-uv-shape">Flatten to UV Shape</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#baking-scalp-mask">Baking scalp mask</a>
    </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Other</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../hair_library/">Hair Library</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../hair_animation/">Rigging and Animation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../character_creator_workflow/">Character Creator</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../faq/">FAQ</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Hair Tool 4</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Baking Textures</li>
      <li class="breadcrumb-item active">Baking Textures</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h2 id="baking-hair-textures">Baking Hair Textures<a class="headerlink" href="#baking-hair-textures" title="Permanent link">&para;</a></h2>
<p><img alt="Texture baking panel" src="../img/texture_baking_panel.jpg" />
<em>Built-in hair baking scene, that comes with Hair Tool. You can select output path, file name, resolution, bake quality etc.</em></p>
<p>Baking Template consist of few objects with <a href="../main_workflows/hair_system/"><strong>Hair Systems</strong></a> attached to them. Tweak these Hair Systems, to get desired result.</p>
<blockquote>
<p><strong>Note</strong>: For proper bake, template uses <a href="../hair_profiles/#round-profile"><strong>Round Profile</strong></a> type.</p>
</blockquote>
<h4 id="loading-baking-template">Loading Baking Template<a class="headerlink" href="#loading-baking-template" title="Permanent link">&para;</a></h4>
<p><img alt="Open Baking Scene" src="../img/open_baking_scene.jpeg" />
<em>Load baking template using: right Sidebar &gt; Hair Tool &gt; Hair Bake panel</em></p>
<p>There are two options to load baking template:</p>
<ul>
<li><strong>Open baking template</strong> as new file, and setup adjust hair there (save your current file before opening baking file)</li>
<li><strong>Load baking template</strong> to your working file - using 'Import Baking Scene' button - this will add 'BakingHair' scene to your file</li>
</ul>
<h4 id="available-passes">Available Passes<a class="headerlink" href="#available-passes" title="Permanent link">&para;</a></h4>
<p><img alt="Texture baking panel" src="../img/hair_bake_passes.jpg" />
<em>Example of baked hair passes - diffuse, AO, opacity etc.</em></p>
<ul>
<li><strong>Diffuse</strong></li>
<li><strong>AO</strong></li>
<li><strong>Normal Map</strong></li>
<li><strong>Opacity Mask</strong></li>
<li><strong>Root Mask</strong> - black to white gradient that goes from root to tip</li>
<li><strong>Random ID</strong> - give random gray value to each strand</li>
<li><strong>Random Parent</strong> - give random color based on strands Parent ID</li>
<li><strong>Random ID</strong> - give random color to each strand</li>
<li><strong>Flow Map</strong> - perturbs tangent vector - useful for driving anisotropic specular direction</li>
<li><strong>Direction Map</strong> - alternative to Flow Map. May give slightly better results</li>
<li><strong>Depth</strong> - use empty named 'Depth_Driver' to control depth range of the pass</li>
</ul>
<blockquote>
<p><strong>Note</strong>: You can select multiple passes by shift clicking on them, to bake them all at once. All objects that are inside bake collection (by default it uses 'Hair For Bake' collection) will receive proper material pass automatically</p>
</blockquote>
<h4 id="tweaking-hair">Tweaking Hair<a class="headerlink" href="#tweaking-hair" title="Permanent link">&para;</a></h4>
<video width="100%" height="100%" controls>
  <source src="../video/baking_setup_geo.mp4" type="video/mp4">
</video>
<p><em>Example of tweaking hair systems in baking template</em></p>
<p>Most of the hair objects are build from three Hair Systems (first and third are shared between most of the objects, so that you can tweak them all at once):</p>
<ul>
<li><strong>ClumpGen</strong> - Strands Generator &gt; bit of <a href="../main_workflows/hair_deformers/#noise">Noise</a> &gt; tiny bit of <a href="../main_workflows/hair_deformers/#clumps-child">Clump</a> (to compensate hair spreading due to noise)</li>
<li><strong>Filter: Del</strong> - <a href="../main_workflows/hair_deformers/#delete-strands">remove some</a> of the strands generated above - to control how thick hair looks. This HSystem is different for each object, so you can adjust it to your liking.</li>
<li><strong>SharedTrim</strong> - Finally, we trim some strands randomly and give the hair a more natural taper at the roots and ends.</li>
</ul>
<h4 id="previewing-bake-result">Previewing Bake Result<a class="headerlink" href="#previewing-bake-result" title="Permanent link">&para;</a></h4>
<p>Baking file has hair curve object named 'Haircard_preview_curve', with <code>PreviewBakeMat</code> material assigned to its profile. After pressing 'Bake', the output textures will be automatically applied to this material, so you can preview baking output maps.</p>
<video width="100%" height="100%" controls>
    <source src="../video/bake_preview.mp4" type="video/mp4">
</video>
<p><em>On the left: hair curves used for bake; on the right: haircars with baked texture applied</em></p>
<h3 id="video-tutorial">Video Tutorial<a class="headerlink" href="#video-tutorial" title="Permanent link">&para;</a></h3>
<iframe width="560" height="315" src="https://www.youtube.com/embed/3ATRZ-ox5s8?si=YdH40xR0hKwi0rvm&amp;start=2827" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

<p><em>Video above (at <a href="https://www.youtube.com/watch?v=3ATRZ-ox5s8&amp;t=2827s">47:07</a> timestamp) shows: baking new texture, previewing bake result and updating hair UVs, importing textures into your hair material</em></p>
<h3 id="baking-textures">Baking Textures<a class="headerlink" href="#baking-textures" title="Permanent link">&para;</a></h3>
<p>To bake hair texture:</p>
<ul>
<li>Save current blend file.</li>
<li>Press <strong>'Open Baking scene'</strong> button located in right UI Sidebar(N): "Hair Tool" tab &gt; <strong>'Hair Bake'</strong> panel. New scene will be loaded, with example hair setup ready to be baked (you may want to save this template scene as new blend file, to avoid overriding the 'master' template)</li>
<li>The <strong>'Hair Bake'</strong> panel will contain new options. Enable bake passes with Shift+click on multiple the bake passes buttons that you want to bake</li>
<li>Set output path for baked textures, resolution, bake name etc.</li>
<li>Press <strong>'Bake Hair'</strong> button to bake selected passes</li>
</ul>
<!-- <iframe width="560" height="315" src="https://www.youtube.com/embed/0UAxl549pNA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe> -->
<!-- *Texture baking in Blender 2.79 - not much has changed in Blender 2.8, except bake panel is now located on right* -->

<p>You can customize suffix given to each pass output texture name in addon preferences -&gt; Baking Tab.</p>
<h3 id="texture-channel-mixing">Texture channel mixing<a class="headerlink" href="#texture-channel-mixing" title="Permanent link">&para;</a></h3>
<p><img alt="Texture channel mixing" src="../img/texture_channel_mixing.gif" />
<em>Custom texture node editor - where you can pack baked maps into new texture RGBA channels</em></p>
<blockquote>
<p><strong>Note</strong>:If you enable button '<strong>Composite channels</strong>', Hair Tool will automatically create node setup with input textures from baked images, after baking is finished.
<img alt="Texture channel mixing" src="../img/composite_channels.jpg" /></p>
</blockquote>
<h3 id="flatten-to-uv-shape">Flatten to UV Shape<a class="headerlink" href="#flatten-to-uv-shape" title="Permanent link">&para;</a></h3>
<p>Create flattened version of hair, from base mesh UVs. Useful when you want to bake hair system, without having to convert hair to mesh . To un-flatten object run this operator again</p>
<video style="width:100%" controls>
<source src="../img/uv_flatten.mp4" type="video/mp4">
Your browser does not support the video tag.
</video>
<p><em>On left we have Hair System attached to Suzane, we flatten it using UVMap. On right you can see result of baking that flat shape to texture</em></p>
<!-- ![UV to shape key](./img/uv_flatten.gif) -->

<blockquote>
<p><strong>Note1</strong>: For baking flattened hair use baking scene setup.</p>
</blockquote>
<h3 id="baking-scalp-mask">Baking scalp mask<a class="headerlink" href="#baking-scalp-mask" title="Permanent link">&para;</a></h3>
<p>There is no option in Blender to <strong>bake hair to mesh</strong> (it supports only mesh-to-mesh baking), and I could not find any for that purpose. So here is my custom solution, called <a href="https://bartoszstyperek.gumroad.com/l/BatchtoolsBaker">Cycles Baker</a>.<br>
The setup:
 * Install Cycles Baker as <strong>Extension</strong> from Blender Preferences &gt; Get Extensions &gt; Install From Disk (dropdown menu at the very top right corner)
 * Right Sidebar &gt; Tools &gt; Cycles Baker tab: use 'Add Pair' button and pick low-poly scalp mesh and high-poly hair object
 * Add needed baking passes (e.g. Diffuse, AO, Opacity, Depth etc)
 * Make sure to set hair profile to <a href="../hair_profiles/#round-profile">Round</a>.
 * Press 'Bake'</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../mesh_ribbons_ops/" class="btn btn-neutral float-left" title="Mesh tools"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../hair_library/" class="btn btn-neutral float-right" title="Hair Library">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../mesh_ribbons_ops/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../hair_library/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
