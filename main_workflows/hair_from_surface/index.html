<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Curves from Grid Surface - Hair Tool 4</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../extra.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Curves from Grid Surface";
        var mkdocs_page_input_path = "main_workflows/hair_from_surface.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> Hair Tool 4
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../overview/">Overview</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Main Concepts</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../hair_system/">Hair System</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../hair_deformers/">Hair Deformers</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../input_masks/">Input Masks</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../hair_profiles/">Hair Profiles</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../uv_material/">Material and UV</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Modeling Methods</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Curves from Grid Surface</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#video-tutorial">Video Tutorial</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#proper-grid-mesh">Proper grid mesh</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#selected-parameters">Selected Parameters</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#limitations">Limitations</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../hair_with_track_mesh/">Hair with Track Mesh</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../hair_drawing/">Drawing hair</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../short_hair/">Short Hair</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../shell_hair/">Shell Hair</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Tools</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../convert_hair/">Convert Hair</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../hair_modeling/">Hair Modeling</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../hair_sculpting/">Hair Sculpting</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../curve_tool/">Curve tools</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../mesh_ribbons_ops/">Mesh tools</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Texture creation</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../baking_hair_setup/">Baking Blend File</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../texture_baking/">Baking Textures</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Other</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../hair_library/">Hair Library</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../hair_animation/">Animation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../character_creator_workflow/">Character Creator</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../faq/">FAQ</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">Hair Tool 4</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Modeling Methods</li>
      <li class="breadcrumb-item active">Curves from Grid Surface</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h2 id="curve-from-grid-surface">Curve from grid surface<a class="headerlink" href="#curve-from-grid-surface" title="Permanent link">&para;</a></h2>
<p>It uses <a href="../hair_system/#strands-from-grid-surface">Strands from Grid Surface</a> Hair Generator, where active mesh will guide be used for guiding hair strands flow. Guide mesh has to have grid topology: made of quads,</p>
<p><img alt="Hair Tool" src="../../img/bannerhairtool2.jpg" /></p>
<p>Useful for: <strong>long hair, eyelashes, hair buns, layered type of hair</strong> etc. It's designed to generate low poly mesh, so it runs smoothly mobile games.</p>
<video style="width:100%" controls>
  <source src="../../video/curve_from_grid.mp4" type="video/mp4">
Your browser does not support the video tag.
</video>
<p><em>Use Ctrl+Shift+H &gt; <code>Curves from grid surface</code> to add Hair System preset, where active mesh will guide generated strands</em></p>
<blockquote>
<p><strong>Note</strong>: In older Hair Tool 2.4x series, you could directly edit generated curves (in edit mode). In HTool 3.x these curves are generated procedurally in geometry nodes, thus you cannot edit them directly. First use <a href="../hair_system/#bake">Bake</a> option to convert these procedural curves to real geometry.</p>
<p><strong>Note</strong>: If you want to cover head scalp uniformly with hair, then use standard Hair System with <a href="../hair_system/#strands-generator">Strand Generator</a> instead.</p>
</blockquote>
<h4 id="video-tutorial">Video Tutorial<a class="headerlink" href="#video-tutorial" title="Permanent link">&para;</a></h4>
<iframe width="560" height="315" src="https://www.youtube.com/embed/Rp7yGbxm7HI?start=39"
title="YouTube video player" frameborder="0" allow="accelerometer; autoplay;
clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
<p><em>First 12 minutes shows how to use 'Curves from Grid Surface'. Rest is about creation of actual hair - can be skipped</em></p>
<h4 id="proper-grid-mesh">Proper grid mesh<a class="headerlink" href="#proper-grid-mesh" title="Permanent link">&para;</a></h4>
<p>Guide mesh has to be made from quads and <strong>one border edge loop has to be mark as sharp</strong> (or crease): Ctrl+E -&gt; Mark Sharp/Crease - this edge will become roots of hair strands.
<img alt="mark sharp" src="../../img/marksharp.jpg" /></p>
<p>Example of proper grid meshes topologies (for actual hair you would want to model this better - following main hair masses and hair flow):
<img alt="Grid Mesh" src="../../img/grid_meshes_examples.jpg" /></p>
<p>If we flatten these 3d meshes we would get 2D grid:
<img alt="Grid Mesh" src="../../img/flat_grid_example.jpg" /></p>
<h4 id="selected-parameters">Selected Parameters<a class="headerlink" href="#selected-parameters" title="Permanent link">&para;</a></h4>
<p>Control basic properties like generated curves amount, number of points per spline etc. You can use topology of grid surface to guide density of generated strands. In places where grid surface have denser loops you can generate more strands or give more points to each strand.</p>
<p><img alt="Points per strand" src="../../img/grid_surface/strands_count.gif" />
<em><strong>Strands count</strong> - number of strands to generate</em></p>
<p><img alt="Uniform Strands" src="../../img/grid_surface/uniform_strands.gif" />
<em><strong>Uniform Strands Spacing</strong> - Distribute strands uniformly. If not, then more strands will be placed at denser grid surface areas (in this case - more on right)</em></p>
<p><img alt="Uniorm Points" src="../../img/grid_surface/uniform_points.gif" />
<em><strong>Uniform Points Spacing</strong> - Distribute points uniformly along each strand. If not, then more points will be placed at denser grid surface areas (in this case - more on right)</em></p>
<p><img alt="Randomize Spacing" src="../../img/grid_surface/random_spacing.gif" />
<em><strong>Randomize Spacing</strong> - Randomize spacing between strands</em></p>
<p><em><strong>Use Crease Edge</strong> - by default strands will be generated from edge marked as sharp. You can use crease edge instead, if you want to generate strands from creased edges</em></p>
<video style="width:100%" controls>
  <source src="../../img/grid_surface/hook_frist_segment.mp4" type="video/mp4">
Your browser does not support the video tag.
</video>
<p><em><strong>Hook First Segment</strong> - use if you want to 'glue' first segment of each strand to the first two loops of grid surface. This helps with embedding hair strand roots into scalp, without hair clipping through head</em></p>
<h4 id="limitations">Limitations<a class="headerlink" href="#limitations" title="Permanent link">&para;</a></h4>
<blockquote>
<p><strong>Update</strong>: This issue if fixed in Hair Tool 4.x, where instead of using Blender built-in hair interpolation, I implemented my own interpolation algorithm.</p>
</blockquote>
<p><s>In Hair Tool 3.x <strong>Curves from Grid Surface</strong> is using new strand interpolation (based on Geometry Nodes). It has some limitations, see example below:</s></p>
<p><img alt="Ugly Interpolation example" src="../../img/grid_surface/new_grid_interpolation_problem.jpeg" />
<em><s>Example of poor strand interpolation, when using 'Curves From Grid'. Strands do not adhere to the guide grid surface and instead follow path downwards</em></s></p>
<p><img alt="Reason of ugly interpolation" src="../../img/grid_surface/ugly_grid_reason.jpeg" />
<em><s>The reason and explanation: imagine new strand (marked as X above) is picking 2 closest guides; it found one guide to right one to left - which is causing the strand to go to the center (average of both guides)</s></em></p>
<p><img alt="Ugly interpolation fix" src="../../img/grid_surface/ugly_grid_fix.jpeg" />
<em><s>The fix: split guide grid mesh in to mesh islands, this will split guides too (marked with black and white). Now new strand will follow only group of strands (only white or only white) - resulting in clean interpolation on right</s></em></p>
<p><s>The reason why splitting guide mesh, into two or more mesh islands work is due to how <a href="../hair_system/#hair-interpolation">Hair Interpolation</a> in HTool works - strands spawned on one island, will only follow guides from that mesh island.</s></p>
<blockquote>
<p><strong>Note</strong>: <s>You do not have to split base mesh by <a href="https://docs.blender.org/manual/en/latest/modeling/meshes/editing/vertex/rip_vertices.html">ripping geometry</a>. In above case I turned Off 'merge' option in <a href="https://docs.blender.org/manual/en/latest/modeling/modifiers/generate/mirror.html">mirror modifier</a>, thus righ and left side are seen as separate islands. Or you could use <a href="https://docs.blender.org/manual/en/latest/modeling/modifiers/generate/edge_split.html">edge split modifier</a></s></p>
</blockquote>
<iframe width="560" height="315" src="https://www.youtube.com/embed/Rp7yGbxm7HI?si=yJ2HFURfNsbWvxDA&amp;start=904" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
<p><em>In video above I explained and showed how to fix the interpolation issue</em></p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../../uv_material/" class="btn btn-neutral float-left" title="Material and UV"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../hair_with_track_mesh/" class="btn btn-neutral float-right" title="Hair with Track Mesh">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../../uv_material/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../hair_with_track_mesh/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
